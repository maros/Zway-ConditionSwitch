{
   "author" : "Maroš Kollár",
   "category" : "automation_basic",
   "defaults" : {
      "description" : "__m_descr__",
      "title" : "__m_title__"
   },
   "dependencies" : [
      "BaseModule",
      "Presence"
   ],
   "homepage" : "https://github.com/maros/Zway-ConditionSwitch/",
   "icon" : "icon.png",
   "maturity" : "stable",
   "moduleName" : "ConditionSwitch",
   "options" : {
      "fields" : {
         "binary" : {
            "helper" : "__binary_helper__",
            "items" : {
               "fields" : {
                  "device" : {
                     "datasource" : "namespaces",
                     "field" : "optionLabels",
                     "label" : "",
                     "optionLabels" : "namespaces:devices_sensorBinary:deviceName,namespaces:devices_switchBinary:deviceName",
                     "order" : 1,
                     "type" : "select"
                  },
                  "value" : {
                     "order" : 2
                  }
               }
            },
            "label" : "__binary_label__",
            "order" : 3
         },
         "multilevel" : {
            "helper" : "__multilevel_helper__",
            "items" : {
               "fields" : {
                  "device" : {
                     "datasource" : "namespaces",
                     "field" : "optionLabels",
                     "label" : "",
                     "optionLabels" : "namespaces:devices_sensorMultilevel:deviceName,namespaces:devices_switchMultilevel:deviceName",
                     "order" : 1,
                     "type" : "select"
                  },
                  "operator" : {
                     "optionLabels" : [
                        "=",
                        "≠",
                        ">",
                        "≥",
                        "<",
                        "≤"
                     ],
                     "order" : 2,
                     "type" : "select"
                  },
                  "value" : {
                     "order" : 3
                  }
               }
            },
            "label" : "__multilevel_label__",
            "order" : 4
         },
         "presenceMode" : {
            "label" : "__presence_mode_label__",
            "optionLabels" : [
               "__presence_mode_home__",
               "__presence_mode_away__",
               "__presence_mode_vacation__",
               "__presence_mode_night__"
            ],
            "order" : 1,
            "type" : "checkbox"
         },
         "switches": {
             "order" : 5,
             "label": "__switches_label__",
             "helper": "__switches_helper__",
             "items": {
                 "fields": {
                     "type": {
                         "type": "select",
                         "removeDefaultNone": false,
                         "noneLabel": "__type_choose__",
                         "label":"__label_type__",
                         "optionLabels": ["__type_binary__","__type_multilevel__","__type_toggle__"]
                     },
                     "switchBinary":{
                         "dependencies": {
                             "type" : "switchBinary"
                         },
                         "fields": {
                             "device": {
                                 "type": "select",
                                 "removeDefaultNone": false,
                                 "noneLabel": "__device_choose__",
                                 "datasource": "namespaces",
                                 "field": "optionLabels",
                                 "optionLabels": "namespaces:devices_switchBinary:deviceName"
                             },
                             "status": {
                                 "type": "radio",
                                 "optionLabels": ["__on__","__off__"]
                             }
                         }
                     },
                     "switchMultilevel":{
                         "dependencies": {
                             "type" : "switchMultilevel"
                         },
                         "fields": {
                             "device": {
                                 "type": "select",
                                 "removeDefaultNone": false,
                                 "noneLabel": "__device_choose__",
                                 "datasource": "namespaces",
                                 "field": "optionLabels",
                                 "optionLabels": "namespaces:devices_switchMultilevel:deviceName,namespaces:devices_switchRGBW:deviceName"
                             },
                             "status": {
                                 "type": "radio",
                                 "optionLabels": ["__on__","__off__","__level__"]
                             },
                             "level": {
                                 "field": "enum",
                                 "dependencies": {
                                     "status": "lvl"
                                 }
                             }
                         }
                     },
                     "toggleButton":{
                         "dependencies": {
                             "type" : "toggleButton"
                         },
                         "fields": {
                             "startScene": {
                                 "type": "select",
                                 "removeDefaultNone": false,
                                 "noneLabel": "__device_choose__",
                                 "label":"__start_scene_label__",
                                 "helper":"__start_scene_helper__",
                                 "datasource": "namespaces",
                                 "field": "optionLabels",
                                 "optionLabels": "namespaces:devices_toggleButton:deviceName"
                             },
                             "endScene": {
                                 "type": "select",
                                 "removeDefaultNone": false,
                                 "noneLabel": "__device_choose__",
                                 "label":"__end_scene_label__",
                                 "helper":"__end_scene_helper__",
                                 "datasource": "namespaces",
                                 "field": "optionLabels",
                                 "optionLabels": "namespaces:devices_toggleButton:deviceName"
                             }
                         }
                     }
                 }
             }
         },
         "time" : {
            "helper" : "__time_helper__",
            "items" : {
               "fields" : {
                  "dayofweek" : {
                     "label" : "__dayofweek_label__",
                     "optionLabels" : [
                        "__dayofweek_0__",
                        "__dayofweek_1__",
                        "__dayofweek_2__",
                        "__dayofweek_3__",
                        "__dayofweek_4__",
                        "__dayofweek_5__",
                        "__dayofweek_6__"
                     ],
                     "type" : "checkbox"
                  },
                  "timeFrom" : {
                     "label" : "__time_from_label__",
                     "maskString" : "99:99",
                     "order" : 1,
                     "placeholder" : "__time_placeholder__",
                     "type" : "time"
                  },
                  "timeTo" : {
                     "label" : "__time_to_label__",
                     "maskString" : "99:99",
                     "order" : 2,
                     "placeholder" : "__time_placeholder__",
                     "type" : "time"
                  }
               }
            },
            "label" : "__time_label__",
            "order" : 2
         }
      }
   },
   "repository" : {
      "source" : "https://github.com/maros/Zway-ConditionSwitch",
      "type" : "git"
   },
   "schema" : {
      "properties" : {
         "binary" : {
            "items" : {
               "properties" : {
                  "device" : {
                     "datasource" : "namespaces",
                     "enum" : "namespaces:devices_sensorBinary:deviceId,namespaces:devices_switchBinary:deviceId",
                     "field" : "enum",
                     "required" : true
                  },
                  "value" : {
                     "default" : "on",
                     "enum" : [
                        "off",
                        "on"
                     ],
                     "required" : true,
                     "type" : "string"
                  }
               },
               "type" : "object"
            },
            "type" : "array"
         },
         "multilevel" : {
            "items" : {
               "properties" : {
                  "device" : {
                     "datasource" : "namespaces",
                     "enum" : "namespaces:devices_sensorMultilevel:deviceId,namespaces:devices_switchMultilevel:deviceId,namespaces:devices_battery:deviceId",
                     "field" : "enum",
                     "required" : true
                  },
                  "operator" : {
                     "enum" : [
                        "=",
                        "!=",
                        ">",
                        ">=",
                        "<",
                        "<="
                     ],
                     "required" : true,
                     "type" : "string"
                  },
                  "value" : {
                     "required" : true,
                     "type" : "number"
                  }
               },
               "type" : "object"
            },
            "type" : "array"
         },
         "presenceMode" : {
            "enum" : [
               "home",
               "away",
               "vacation",
               "night"
            ],
            "type" : "array"
         },
         "time" : {
            "items" : {
               "properties" : {
                  "dayofweek" : {
                     "enum" : [
                        "0",
                        "1",
                        "2",
                        "3",
                        "4",
                        "5",
                        "6"
                     ],
                     "type" : "array"
                  },
                  "timeFrom" : {
                     "pattern" : "^([01]?[0-9]|2[0-3]):([0-5][0-9])$",
                     "placeholder" : "__time_placeholder__",
                     "required" : true,
                     "type" : "string"
                  },
                  "timeTo" : {
                     "pattern" : "^([01]?[0-9]|2[0-3]):([0-5][0-9])$",
                     "placeholder" : "__time_placeholder__",
                     "required" : true,
                     "type" : "string"
                  }
               },
               "type" : "object"
            },
            "type" : "array"
         },
         "switches": {
             "type":"array",
             "items":{
                 "type":"object",
                 "properties": {
                     "type":{
                         "type":"string",
                         "enum":["switchBinary","switchMultilevel", "switchRGBW", "toggleButton"],
                         "required":true
                     },
                     "switchBinary":{
                         "type":"object",
                         "dependencies": "type",
                         "properties":{
                             "device": {
                                 "type":"string",
                                 "field": "enum",
                                 "datasource": "namespaces",
                                 "enum": "namespaces:devices_switchBinary:deviceId",
                                 "required": true
                             },
                             "status": {
                                 "type": "integer",
                                 "required": true,
                                 "enum": ["on","off"]
                             }
                         }
                     },
                     "switchMultilevel":{
                         "type":"object",
                         "dependencies": "type",
                         "properties":{
                             "device": {
                                 "type":"string",
                                 "field": "enum",
                                 "datasource": "namespaces",
                                 "enum": "namespaces:devices_switchMultilevel:deviceId,namespaces:devices_switchRGBW:deviceId",
                                 "required": true
                             },
                             "status": {
                                 "type": "string",
                                 "required": true,
                                 "enum": ["on","off","level"]
                             },
                             "level": {
                                 "type": "integer",
                                 "minimum":"0",
                                 "maximum":"99",
                                 "required": true,
                                 "dependencies": "status"
                             }
                         }
                     },
                     "toggleButton":{
                         "type":"object",
                         "dependencies": "type",
                         "properties":{
                             "startScene": {
                                 "type":"string",
                                 "field": "enum",
                                 "datasource": "namespaces",
                                 "enum": "namespaces:devices_toggleButton:deviceId",
                                 "required": true
                             },
                             "endScene": {
                                 "type":"string",
                                 "field": "enum",
                                 "datasource": "namespaces",
                                 "enum": "namespaces:devices_toggleButton:deviceId"
                             }
                         }
                     }
                 }
             }
         }
      },
      "required" : true,
      "type" : "object"
   },
   "singleton" : false,
   "version" : 1.02
}
